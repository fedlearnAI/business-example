(window.webpackJsonp=window.webpackJsonp||[]).push([[20,35],{"1Ri8":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("7DNP"),i=n("jnCu");t.default=function(){return r.a.createElement(i.a,{type:"404",style:{minHeight:500,height:"80%"},linkElement:o.Link})}},maEh:function(e,t,n){"use strict";n.r(t);var a,r,o=n("pbKT"),i=n.n(o),l=n("p0XB"),c=n.n(l),u=n("XVgq"),s=n.n(u),p=n("Z7t5"),h=n.n(p),m=n("d04V"),f=n.n(m),d=(n("GNNt"),n("wEI+")),y=(n("T2oS"),n("W9HT")),g=(n("miYZ"),n("tsqr")),v=n("pLtp"),E=n.n(v),k=n("/HRN"),b=n.n(k),M=n("WaGi"),C=n.n(M),x=n("K47E"),w=n.n(x),S=n("N9n2"),R=n.n(S),P=n("ZDA2"),I=n.n(P),N=n("/+P4"),O=n.n(N),K=n("xHqa"),j=n.n(K),z=n("UXZV"),A=n.n(z),T=(n("B9cy"),n("Ol7k")),L=n("q1tI"),D=n.n(L),q=n("17x9"),U=n.n(q),W=n("ZFw/"),B=n.n(W),F=n("MuoO"),G=n("7DNP"),H=n("E6Dt"),Q=n("TSYQ"),V=n.n(Q),Z=n("4zCG"),J=n("NTd/"),X=n.n(J),Y=n("xc/l"),$=n.n(Y),_=n("SftL"),ee=n.n(_),te=n("Jo+v"),ne=n.n(te),ae=(n("qVdP"),n("jsC+")),re=(n("/zsF"),n("PArb")),oe=(n("lUTK"),n("BvKs")),ie=(n("Pwec"),n("CtXQ")),le=n("V/fD"),ce=n.n(le),ue=n("fqkP"),se=n.n(ue);n("h3zL"),n("20nU");function pe(e){var t=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=O()(e);if(t){var r=O()(this).constructor;n=i()(a,arguments,r)}else n=a.apply(this,arguments);return I()(this,n)}}var he=(a=se()(600),r=function(e){R()(n,e);var t=pe(n);function n(){var e;b()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j()(w()(e),"state",{pageType:"main"}),j()(w()(e),"toggle",(function(){var t=e.props,n=t.collapsed;(0,t.onCollapse)(!n),e.triggerResizeEvent()})),e}return C()(n,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname;this.handleActiveMenu(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.location.pathname;this.props.location.pathname!==t&&this.handleActiveMenu(t)}},{key:"componentWillUnmount",value:function(){this.triggerResizeEvent.cancel()}},{key:"handleActiveMenu",value:function(e){this.setState({pageType:"/"===e||"/main"===e?"main":"robot"})}},{key:"triggerResizeEvent",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{}:t,a=e.collapsed,r=e.isMobile,o=e.logo,i=e.onMenuClick,l=e.onGlobalClick,c=(e.onRobotClick,this.state.pageType,n.roleType,D.a.createElement(oe.a,{className:"menu",selectedKeys:[],onClick:i},D.a.createElement(oe.a.Item,{key:"logout"},D.a.createElement(ie.a,{type:"logout"}),"退出登录"))),u=D.a.createElement(oe.a,{className:"menu",selectedKeys:[],onClick:l},D.a.createElement(oe.a.Item,{key:"cn"},"cn 中文"),D.a.createElement(oe.a.Item,{key:"us"},"us English"));return D.a.createElement("div",{className:"header global-header"},r&&[D.a.createElement(G.Link,{to:"/",className:"logo",key:"logo"},D.a.createElement("img",{src:o,alt:"logo",width:"32"})),D.a.createElement(re.a,{type:"vertical",key:"line"})],D.a.createElement(ie.a,{className:"trigger",type:a?"menu-unfold":"menu-fold",onClick:this.toggle}),D.a.createElement("div",{className:"right"},n.username?D.a.createElement(ae.a,{overlay:c},D.a.createElement("span",{className:"action account"},D.a.createElement(ie.a,{type:"user",style:{color:"#1890FF",fontSize:24}}),D.a.createElement("span",{className:"name"},n.username))):D.a.createElement(y.a,{size:"small",style:{marginLeft:8}}),D.a.createElement(ae.a,{overlay:u},D.a.createElement("span",{className:"action account"},D.a.createElement(ie.a,{type:"global",style:{color:"#1890FF",fontSize:24}})))))}}]),n}(L.PureComponent),ce()(r.prototype,"triggerResizeEvent",[a],ne()(r.prototype,"triggerResizeEvent"),r.prototype),r),me=n("htGi"),fe=n.n(me),de=(n("UYKw"),n("qhzC")),ye=n("TbGu"),ge=n.n(ye),ve=n("vRGJ"),Ee=n.n(ve);n("mR0u");function ke(e){var t=e.split("/").filter((function(e){return e}));return t.map((function(e,n){return"/".concat(t.slice(0,n+1).join("/"))}))}function be(e){var t=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=O()(e);if(t){var r=O()(this).constructor;n=i()(a,arguments,r)}else n=a.apply(this,arguments);return I()(this,n)}}var Me=T.a.Sider,Ce=oe.a.SubMenu,xe=function(e){return"string"==typeof e&&0===e.indexOf("http")?D.a.createElement("img",{src:e,alt:"icon",className:"icon sider-menu-item-img"}):"string"==typeof e?D.a.createElement(ie.a,{type:e}):e},we=function(e,t){return e.filter((function(e){return Ee()(e).test(t)}))},Se=function(e){R()(n,e);var t=be(n);function n(e){var a;return b()(this,n),a=t.call(this,e),j()(w()(a),"getMenuItemPath",(function(e){var t=a.conversionPath(e.path),n=xe(e.icon),r=e.target,o=e.name;return/^https?:\/\//.test(t)?D.a.createElement("a",{href:t,target:r},n,D.a.createElement("span",null,o)):D.a.createElement(G.Link,{to:t,target:r,replace:t===a.props.location.pathname,onClick:a.props.isMobile?function(){a.props.onCollapse(!0)}:void 0},n,D.a.createElement("span",null,o))})),j()(w()(a),"getSubMenuOrItem",(function(e){if(e.children&&e.children.some((function(e){return e.name}))){var t=a.getNavMenuItems(e.children);return t&&t.length>0?D.a.createElement(Ce,{title:e.icon?D.a.createElement("span",null,xe(e.icon),D.a.createElement("span",null,e.name)):e.name,key:e.path},t):null}return D.a.createElement(oe.a.Item,{key:e.path},a.getMenuItemPath(e))})),j()(w()(a),"getNavMenuItems",(function(e){return e?e.filter((function(e){return e.name&&!e.hideInMenu})).map((function(e){var t=a.getSubMenuOrItem(e);return a.checkPermissionItem(e.authority,t)})).filter((function(e){return e})):[]})),j()(w()(a),"getSelectedMenuKeys",(function(){return ke(a.props.location.pathname).map((function(e){return we(a.flatMenuKeys,e).pop()}))})),j()(w()(a),"conversionPath",(function(e){return e&&0===e.indexOf("http")?e:"/".concat(e||"").replace(/\/+/g,"/")})),j()(w()(a),"checkPermissionItem",(function(e,t){return a.props.Authorized&&a.props.Authorized.check?(0,a.props.Authorized.check)(e,t):t})),j()(w()(a),"isMainMenu",(function(e){return a.menus.some((function(t){return e&&(t.key===e||t.path===e)}))})),j()(w()(a),"handleOpenChange",(function(e){var t=e[e.length-1],n=e.filter((function(e){return a.isMainMenu(e)})).length>1;a.setState({openKeys:n?[t]:ge()(e)})})),a.menus=e.menuData,a.flatMenuKeys=a.getFlatMenuKeys(e.menuData),a.state={openKeys:a.getDefaultCollapsedSubMenus(e)},a}return C()(n,[{key:"componentWillReceiveProps",value:function(e){e.location.pathname!==this.props.location.pathname&&this.setState({openKeys:this.getDefaultCollapsedSubMenus(e)})}},{key:"getDefaultCollapsedSubMenus",value:function(e){var t=this;return ke((e||this.props).location.pathname).map((function(e){return we(t.flatMenuKeys,e)[0]})).filter((function(e){return e}))}},{key:"getFlatMenuKeys",value:function(e){var t=this,n=[];return e.forEach((function(e){e.children&&(n=n.concat(t.getFlatMenuKeys(e.children))),n.push(e.path)})),n}},{key:"render",value:function(){var e=this.props,t=e.logo,n=e.collapsed,a=e.onCollapse,r=this.state.openKeys,o=n?{}:{openKeys:r},i=this.getSelectedMenuKeys();return i.length||(i=[r[r.length-1]]),D.a.createElement(Me,{trigger:null,collapsible:!0,collapsed:n,breakpoint:"lg",onCollapse:a,width:256,className:"sider sider-menu"},D.a.createElement("div",{className:"logo",key:"logo"},D.a.createElement(G.Link,{to:"/"},D.a.createElement("img",{src:t,alt:"logo"}),D.a.createElement("h1",null,X.a.formatMessage({id:"total.flp"})))),D.a.createElement(oe.a,fe()({key:"Menu",theme:"dark",mode:"inline"},o,{onOpenChange:this.handleOpenChange,selectedKeys:i,style:{padding:"16px 0",width:"100%"}}),this.getNavMenuItems(this.menus)))}}]),n}(L.PureComponent),Re=function(e){return e.isMobile?D.a.createElement(de.a,{parent:null,level:null,iconChild:null,open:!e.collapsed,onMaskClick:function(){e.onCollapse(!0)},width:"256px"},D.a.createElement(Se,fe()({},e,{collapsed:!e.isMobile&&e.collapsed}))):D.a.createElement(Se,e)},Pe=n("1Ri8"),Ie=n("vu7d"),Ne=n("QjNE"),Oe=n("dNKj"),Ke=n("tkAB"),je=n.n(Ke);function ze(e){var t=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=O()(e);if(t){var r=O()(this).constructor;n=i()(a,arguments,r)}else n=a.apply(this,arguments);return I()(this,n)}}function Ae(e,t){var n=void 0!==h.a&&e[s.a]||e["@@iterator"];if(!n){if(c()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return f()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Le=T.a.Content,De=T.a.Header,qe=Ne.a.AuthorizedRoute,Ue=Ne.a.check,We=$.a;We=sessionStorage.getItem("global")&&"us"===sessionStorage.getItem("global")?ee.a:$.a;var Be=["/login"],Fe=[];Object(Oe.a)().forEach((function e(t){t&&t.children&&t.children[0]&&t.children[0].path&&(Fe.push({from:"".concat(t.path),to:"".concat(t.children[0].path)}),t.children.forEach((function(t){e(t)})))}));var Ge,He=function e(t,n){var a,r={},o={},i=Ae(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;n[l.path]||(r[l.path]=l),l.children&&A()(o,e(l.children,n))}}catch(e){i.e(e)}finally{i.f()}return A()({},n,r,o)},Qe={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}},Ve={system:{name:"系统管理",key:"system",path:""},resource:{name:"资源管理",key:"resource",path:"/system/resource"},authority:{name:"权限管理",key:"authority",path:"/system/auth"},user:{name:"用户管理",key:"user",path:"/system/user"},config:{name:"系统配置",key:"config",path:"/system/config"}};Object(Z.enquireScreen)((function(e){Ge=e}));var Ze=function(e){R()(n,e);var t=ze(n);function n(){var e;b()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),j()(w()(e),"state",{isMobile:Ge}),j()(w()(e),"getBashRedirect",(function(){var t=new URL(window.location.href),n=t.searchParams.get("redirect");if(!n){var a=e.props.routerData;return E()(a).find((function(e){return Ue(a[e].authority,e)&&"/"!==e}))}return t.searchParams.delete("redirect"),window.history.replaceState(null,"redirect",t.href),n})),j()(w()(e),"handleMenuCollapse",(function(t){e.props.dispatch({type:"global/changeLayoutCollapsed",payload:t})})),j()(w()(e),"handleMenuClick",(function(t){var n=t.key,a=e.props,r=a.dispatch;a.location.pathname;"logout"===n?r({type:"user/logout"}).catch((function(e){g.a.error(e.message)})):r(G.routerRedux.push({pathname:Ve[n].path}))})),j()(w()(e),"handleGlobalClick",(function(t){var n=t.key,a=e.props;a.dispatch,a.location.pathname;"cn"===n?sessionStorage.setItem("global","cn"):"us"===n&&sessionStorage.setItem("global","us"),window.location.reload()})),j()(w()(e),"handleRobotClick",(function(t){var n=e.props,a=n.dispatch,r=(n.location.pathname,n.currentUser);a({type:"user/selectRobot",payload:t}).then((function(){a({type:"user/fetchMenuList",payload:{roleId:r.roleId,roleType:r.roleType,robotCode:t.code}})}))})),j()(w()(e),"handleShowFullPage",(function(){var t=e.props.location.pathname;return~Be.indexOf(t)})),e}return C()(n,[{key:"getChildContext",value:function(){var e=this.props,t=e.location,n=e.routerData;return{location:t,breadcrumbNameMap:He(Object(Oe.a)(),n)}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.location.pathname,a=t.dispatch;Object(Ne.b)(n);this.enquireHandler=Object(Z.enquireScreen)((function(t){e.setState({isMobile:t})})),sessionStorage.getItem("username")||a(G.routerRedux.replace("/login")),a({type:"user/setAuthorityMenu"}).catch((function(e){g.a.error(e.message)}))}},{key:"componentWillUnmount",value:function(){Object(Z.unenquireScreen)(this.enquireHandler)}},{key:"getPageTitle",value:function(){var e=this.props,t=e.routerData,n=e.location.pathname,a=X.a.formatMessage({id:"total.flp"});return t[n]&&t[n].name&&(a="".concat(t[n].name," - ").concat(X.a.formatMessage({id:"total.flp"}))),a}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.collapsed,a=e.routerData,r=e.match,o=e.location;if(e.initLoading)return D.a.createElement("div",{style:{width:"100%",height:"100%",margin:"auto",paddingTop:50,textAlign:"center"}},D.a.createElement(y.a,{size:"large"}));var i=this.getBashRedirect(),l=this.handleShowFullPage()?D.a.createElement(T.a,null,D.a.createElement(Le,null,D.a.createElement(G.Switch,null,Fe.map((function(e){return D.a.createElement(G.Redirect,{key:e.from,exact:!0,from:e.from,to:e.to})})),Object(Ie.a)(r.path,a).map((function(e){return D.a.createElement(qe,{key:e.key,path:e.path,component:e.component,exact:e.exact,authority:e.authority,redirectPath:"/exception/403"})})),D.a.createElement(G.Redirect,{exact:!0,from:"/",to:i}),D.a.createElement(G.Route,{render:Pe.default})))):D.a.createElement(T.a,null,D.a.createElement(Re,{logo:je.a,Authorized:Ne.a,menuData:Object(Oe.a)(),collapsed:n,location:o,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse}),D.a.createElement(T.a,null,D.a.createElement(De,{style:{padding:0}},D.a.createElement(he,{logo:je.a,currentUser:t,collapsed:n,location:o,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse,onMenuClick:this.handleMenuClick,onRobotClick:this.handleRobotClick,onGlobalClick:this.handleGlobalClick})),D.a.createElement(Le,{style:{margin:"24px 24px 0"}},D.a.createElement(G.Switch,null,Fe.map((function(e){return D.a.createElement(G.Redirect,{key:e.from,exact:!0,from:e.from,to:e.to})})),Object(Ie.a)(r.path,a).map((function(e){return D.a.createElement(qe,{key:e.key,path:e.path,component:e.component,exact:e.exact,authority:e.authority,redirectPath:"/exception/403"})})),D.a.createElement(G.Redirect,{exact:!0,from:"/",to:i}),D.a.createElement(G.Route,{render:Pe.default})))));return D.a.createElement(d.a,{locale:We},D.a.createElement(B.a,{title:this.getPageTitle()},D.a.createElement(H.ContainerQuery,{query:Qe},(function(e){return D.a.createElement("div",{className:V()(e)},l)}))))}}]),n}(D.a.PureComponent);j()(Ze,"childContextTypes",{location:U.a.object,breadcrumbNameMap:U.a.object});t.default=Object(F.connect)((function(e){var t=e.user,n=e.global,a=e.loading;return{currentUser:t.currentUser,collapsed:n.collapsed,menuLoading:a.effects["user/fetchMenuList"],menuList:t.menuList,initLoading:a.effects["user/initSubsQueue"]}}))(Ze)},tkAB:function(e,t,n){e.exports=n.p+"8437374a128abff1cf45c3d8fc8fee41.jpg"}}]);