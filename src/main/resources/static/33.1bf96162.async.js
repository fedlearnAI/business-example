(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{kLhj:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var a,r=n("pbKT"),i=n.n(r),o=(n("IzEo"),n("bx4M")),s=(n("g9YV"),n("wCAj")),c=(n("+L6B"),n("2/Rp")),u=(n("Awhp"),n("KrTs")),l=(n("5Dmo"),n("3S7+")),d=(n("miYZ"),n("tsqr")),p=n("/HRN"),k=n.n(p),m=n("WaGi"),f=n.n(m),h=n("K47E"),y=n.n(h),T=n("N9n2"),g=n.n(T),v=n("ZDA2"),N=n.n(v),E=n("/+P4"),I=n.n(E),w=n("xHqa"),x=n.n(w),C=(n("y8nQ"),n("Vl3Y")),S=n("q1tI"),b=n.n(S),R=n("MuoO"),L=n("7DNP"),q=n("NTd/"),P=n.n(q);function B(t){var e=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=I()(t);if(e){var r=I()(this).constructor;n=i()(a,arguments,r)}else n=a.apply(this,arguments);return N()(this,n)}}C.a.Item;var M=function(t){return P.a.formatMessage(t)},O=Object(R.connect)((function(t){return{lists:t.taskTrain.lists,username:t.user.currentUser.username,loading:t.loading.effects["taskTrain/queryTrainList"]}}))(a=function(t){g()(n,t);var e=B(n);function n(){var t;k()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r)),x()(y()(t),"state",{visible:!1,record:{}}),x()(y()(t),"onCancel",(function(){t.setState({visible:!1})})),x()(y()(t),"handleRefresh",(function(){t.queryTrainList()})),x()(y()(t),"queryTrainList",(function(){var e=t.props,n=e.dispatch,a=e.username,r=d.a.loading(M({id:"total.searching"}),0);n({type:"taskTrain/queryTrainList",payload:{username:a,taskId:null}}).then((function(){r()})).catch((function(){r()}))})),x()(y()(t),"showdetail",(function(e){var n=e.taskName,a=e.modelToken,r="COMPLETE"===e.runningStatus?2:1;(0,t.props.dispatch)(L.routerRedux.push("/task/train/detail?taskName=".concat(n,"&token=").concat(a,"&type=").concat(r)))})),x()(y()(t),"handleStop",(function(e,n,a){var r=t.props;(0,r.dispatch)({type:n,payload:{username:r.username,modelToken:e.modelToken,type:a}}).then((function(e){0===e.code?(d.a.success(e.data.describes.join("，")),t.queryTrainList()):1===e.code&&d.a.error(e.data.describes.join("，"))}))})),x()(y()(t),"operateItem",(function(e){var n=t.props.dispatch,a=e.runningStatus;return b.a.createElement(S.Fragment,null,"COMPLETE"===a&&[b.a.createElement("span",{className:"point",onClick:function(){n(L.routerRedux.push("/task/predict/add?token=".concat(e.modelToken)))}},M({id:"total.reasoning"})),b.a.createElement("span",{className:"point",onClick:function(){n(L.routerRedux.push("/task/train/add?taskId=".concat(e.taskId,"&taskName=").concat(e.taskName,"&token=").concat(e.modelToken,"&type=edit")))}},M({id:"train.retrain"}))],"STOP"===a&&[b.a.createElement("span",{className:"point",onClick:function(){n(L.routerRedux.push("/task/train/add?taskId=".concat(e.taskId,"&taskName=").concat(e.taskName,"&token=").concat(e.modelToken,"&type=edit")))}},M({id:"train.retrain"}))],"RUNNING"===a&&[b.a.createElement("span",{className:"point",onClick:function(){return t.handleStop(e,"taskTrain/resolveTaskStop","stop")}},M({id:"train.stopBtn"})),b.a.createElement("span",{className:"point",onClick:function(){return t.handleStop(e,"taskTrain/resolveTaskSuspend","suspend")}},M({id:"train.waiting"}))],"SUSPEND"===a&&[b.a.createElement("span",{className:"point",onClick:function(){return t.handleStop(e,"taskTrain/resolveTaskStop","stop")}},M({id:"train.stopBtn"})),b.a.createElement("span",{className:"point",onClick:function(){return t.handleStop(e,"taskTrain/resolveTaskRestart","resume")}},M({id:"train.restart"}))])})),x()(y()(t),"trainColumns",(function(){t.props.dispatch;return[{title:M({id:"total.taskId"}),key:"taskId",dataIndex:"taskId"},{title:M({id:"total.taskName"}),key:"taskName",dataIndex:"taskName"},{title:M({id:"total.modelId"}),key:"modelToken",dataIndex:"modelToken",render:function(e,n,a){return b.a.createElement(l.a,{title:M({id:"total.detail"})},b.a.createElement("span",{className:"point",onClick:function(){return t.showdetail(n)}},e))}},{title:M({id:"train.status"}),key:"runningStatus",dataIndex:"runningStatus",render:function(t,e,n){var a="",r="";switch(t.toLowerCase()){case"running":a="train.running",r="processing";break;case"suspend":a="train.waiting",r="warning";break;case"complete":a="train.complete",r="success";break;case"stop":a="train.stopBtn",r="warning";break;case"fail":a="train.fail",r="error";break;default:a="train.unKnown",r="default"}return b.a.createElement(u.a,{status:r,text:M({id:a})})}},{title:M({id:"total.operate"}),key:"operate",dataIndex:"operate",render:function(e,n,a){return t.operateItem(n)}}]})),t}return f()(n,[{key:"componentDidMount",value:function(){this.queryTrainList()}},{key:"render",value:function(){var t=this.props,e=t.lists,n=t.dispatch;return b.a.createElement(o.a,{title:M({id:"train.list"})},b.a.createElement("div",null,b.a.createElement(c.a,{icon:"undo",type:"primary",style:{marginRight:"20px"},onClick:this.handleRefresh},M({id:"total.refresh"})),b.a.createElement(c.a,{icon:"plus",type:"primary",style:{marginRight:"20px"},onClick:function(){n(L.routerRedux.push("/task/train/add"))}},M({id:"train.create"}))),b.a.createElement("div",{style:{padding:"20px 0"}},b.a.createElement(s.a,{dataSource:e,columns:this.trainColumns(),rowKey:function(t,e){return e}})))}}]),n}(S.PureComponent))||a},t33a:function(t,e,n){t.exports=n("cHUP")(10)}}]);