(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/SIP":function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return z}));var n,r=a("pbKT"),i=a.n(r),o=(a("IzEo"),a("bx4M")),c=(a("+L6B"),a("2/Rp")),s=a("/HRN"),u=a.n(s),l=a("WaGi"),p=a.n(l),f=a("N9n2"),d=a.n(f),h=a("ZDA2"),m=a.n(h),v=a("/+P4"),y=a.n(v),b=a("q1tI"),g=a.n(b),k=a("MuoO"),I=a("7DNP"),O=(a("MXD1"),a("CFYs")),P=a("htGi"),T=a.n(P),M=(a("miYZ"),a("tsqr")),E=a("K47E"),j=a.n(E),D=a("xHqa"),w=a.n(D),x=(a("OaEy"),a("2fM7")),C=(a("y8nQ"),a("Vl3Y")),S=a("61Lz"),q=a("f/1Y"),B=a("Mlzr"),N=a("TVw2");a("J/jK");function L(t){var e=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=y()(t);if(e){var r=y()(this).constructor;a=i()(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var R,A=C.a.Item,V=x.a.Option,H=S.a.TextArea,K=Object(k.connect)((function(t){var e=t.taskTrain,a=e.selectLists,n=e.alignType,r=e.selection,i=e.commonParams,o=e.algorithmParams,c=e.trainParameter,s=e.crosspParams;return{selectLists:a,alignType:n,selection:r,username:t.user.currentUser.username,loading:t.loading.effects["taskTrain/queryTaskList"],commonParams:i,algorithmParams:o,trainParameter:c,crosspParams:s}}))(n=C.a.create({})(n=Object(q.a)()(n=Object(I.withRouter)(n=function(t){d()(a,t);var e=L(a);function a(){var t;u()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r)),w()(j()(t),"state",{percent:0,idmatchPercent:0,idmatchProcessDesc:"",disIdMatch:!1,describes:[],isReset:!1,isDisabled:!1,commonParams:[],params:[],time:"00:00:00",startTime:0,token:"",matchId:"",type:"add",trainInfo:[],isDetail:!1,status:"",selectState:!1}),w()(j()(t),"timematch",null),w()(j()(t),"timeout",null),w()(j()(t),"timeinterval",null),w()(j()(t),"queryTaskList",(function(){var e=t.props;(0,e.dispatch)({type:"taskTrain/querySelectList",payload:{username:e.username,category:"created"}})})),w()(j()(t),"queryAlignType",(function(){var e=t.props;(0,e.dispatch)({type:"taskTrain/resolveGlobalOption",payload:{username:e.username}})})),w()(j()(t),"queryMatchDetails",(function(){var e=t.props;(0,e.dispatch)({type:"taskTrain/queryMatchDetails",payload:{username:e.username,matchId:Object(B.a)("matchId")},callback:function(e){e&&e.matchType&&t.props.form.setFieldsValue({taskId:e.taskId,type:e.matchType})}})})),w()(j()(t),"handleTaskIdChange",(function(e){t.setState({disIdMatch:!1,idmatchPercent:0,idmatchProcessDesc:""})})),w()(j()(t),"handleIdMatch",(function(e){e&&e.preventDefault();var a=t.props,n=a.dispatch,r=a.form,i=a.username,o=r.getFieldValue("taskId");n({type:"taskTrain/alignIdMatch",payload:{username:i,taskId:o===Object(B.a)("taskName")?Object(B.a)("taskId"):o,matchType:r.getFieldValue("type")}}).then((function(e){var a=e.code,n=e.status,r=e.data;0===a?(t.setState({disIdMatch:!0,matchId:r.matchId,selectState:!0}),M.a.success("开始id对齐"),t.loopIdMatchStatus()):M.a.error(n)})).catch((function(){return M.a.error(Object(N.b)({id:"train.idmatchfail"}))}))})),w()(j()(t),"loopIdMatchStatus",(function(){var e=t.props,a=e.dispatch,n=e.username,r=e.form;a({type:"taskTrain/queryAlignIdMatchStatus",payload:{matchId:null!=Object(B.a)("matchId")?Object(B.a)("matchId"):t.state.matchId,username:n}}).then((function(e){e.status;var a=e.code,n=e.data;if(0===a){var i=n.percent?+n.percent:t.state.idmatchPercent;t.setState({idmatchPercent:i}),t.setState({idmatchProcessDesc:n.describe}),r.setFieldsValue({desc:n.describe}),i<100?Object(B.a)("matchId")&&0===i?t.timematch&&clearTimeout(t.timematch):t.timematch=setTimeout((function(){t.loopIdMatchStatus()}),1e4):t.timematch&&clearTimeout(t.timematch)}else M.a.error(Object(N.b)({id:"train.idmatchfaild"})),t.timematch&&clearTimeout(t.timematch)}))})),t}return p()(a,[{key:"componentDidMount",value:function(){Object(B.a)("matchId")&&(this.setState({matchId:Object(B.a)("matchId")}),this.queryMatchDetails(),this.loopIdMatchStatus())}},{key:"componentWillUnmount",value:function(){var t=this.props.dispatch;this.timeout&&clearTimeout(this.timeout),this.timeinterval&&clearTimeout(this.timeinterval),t({type:"taskTrain/queryParam",payload:{param:[]}})}},{key:"render",value:function(){var t=this.props,e=t.form.getFieldDecorator,a=t.selectLists,n=t.alignType,r=(t.matchDetails,t.loading),i=this.state,s=(i.isDisabled,i.idmatchPercent),u=i.idmatchProcessDesc;i.disIdMatch,i.type,i.isDetail;return g.a.createElement(o.a,{loading:r},g.a.createElement(C.a,{className:"task-info-form"},g.a.createElement(A,T()({label:Object(N.b)({id:"align.task"})},N.d),e("taskId",{rules:[{required:!0,message:Object(N.b)({id:"lign.tasknull"})}]})(g.a.createElement(x.a,{showSearch:!0,optionFilterProp:"children",filterOption:function(t,e){return"".concat(e.props.children).toLowerCase().indexOf(t.toLowerCase())>=0||"".concat(e.props.label).indexOf(t)>=0},disabled:!!Object(B.a)("taskId")||this.state.selectState,placeholder:Object(N.b)({id:"align.task"}),onChange:this.handleTaskIdChange},a.map((function(t){var e=t.taskId,a=t.taskName;return g.a.createElement(V,{key:e,value:e},a)}))))),g.a.createElement(A,T()({label:Object(N.b)({id:"align.type"})},N.d),e("type",{rules:[{required:!0,message:Object(N.b)({id:"align.typenull"})}]})(g.a.createElement(x.a,{showSearch:!0,disabled:!!Object(B.a)("matchId")||this.state.selectState,placeholder:Object(N.b)({id:"align.type"})},n&&n.map&&n.map((function(t){return g.a.createElement(V,{key:t,value:t},t)}))))),g.a.createElement(A,N.e,g.a.createElement(c.a,{type:"primary",onClick:this.handleIdMatch,disabled:Object(B.a)("taskId")||100===s},Object(N.b)({id:"train.idmatchBtn"}))),g.a.createElement(A,T()({label:Object(N.b)({id:"train.idmatchrogress"})},N.d),g.a.createElement(O.a,{percent:s})),g.a.createElement(A,T()({label:Object(N.b)({id:"train.idmatchdesc"})},N.d),e("desc",{initialValue:u})(g.a.createElement(H,{disabled:!0,autoSize:{minRows:5},value:u})))))}}]),a}(b.PureComponent))||n)||n)||n)||n,F=a("NTd/"),G=a.n(F);function U(t){var e=function(){if("undefined"==typeof Reflect||!i.a)return!1;if(i.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=y()(t);if(e){var r=y()(this).constructor;a=i()(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var z=Object(k.connect)((function(t){return{alignModal:t.alignModal}}))(R=function(t){d()(a,t);var e=U(a);function a(){return u()(this,a),e.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var t=this.props.dispatch;return g.a.createElement(o.a,{title:G.a.formatMessage({id:"align.create"}),extra:g.a.createElement(c.a,{type:"primary",onClick:function(){t(I.routerRedux.push("/task/align/list"))}},G.a.formatMessage({id:"launch.goback"}))},g.a.createElement(K,null))}}]),a}(b.PureComponent))||R},"61Lz":function(t,e,a){"use strict";var n=a("pbKT"),r=a.n(n),i=(a("5NDa"),a("5rEg")),o=a("htGi"),c=a.n(o),s=a("/HRN"),u=a.n(s),l=a("WaGi"),p=a.n(l),f=a("N9n2"),d=a.n(f),h=a("ZDA2"),m=a.n(h),v=a("/+P4"),y=a.n(v),b=a("xHqa"),g=a.n(b),k=a("q1tI"),I=a.n(k);function O(t){var e=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=y()(t);if(e){var i=y()(this).constructor;a=r()(n,arguments,i)}else a=n.apply(this,arguments);return m()(this,a)}}var P=function(t){d()(a,t);var e=O(a);function a(){return u()(this,a),e.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var t=this;return I.a.createElement(i.a.TextArea,c()({},this.props,{onBlur:function(e){e.target.value=(e.target.value||"").trim(),t.props.onChange(e),t.props.onBlur(e)}}))}}]),a}(k.PureComponent);g()(P,"defaultProps",{onChange:function(){},onBlur:function(){}});var T=function(t){d()(a,t);var e=O(a);function a(){return u()(this,a),e.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var t=this;return I.a.createElement(i.a,c()({},this.props,{onBlur:function(e){e.target.value=(e.target.value||"").trim(),t.props.onChange(e),t.props.onBlur(e)}}))}}]),a}(k.PureComponent);g()(T,"defaultProps",{onChange:function(){},onBlur:function(){}}),T.TextArea=P,e.a=T},Mlzr:function(t,e,a){"use strict";function n(t){var e=new RegExp("(^|&|\\?)"+t+"=([^&]*)(&|$)"),a=window.location.href.match(e);return null!=a?decodeURI(a[2]):null}a.d(e,"a",(function(){return n}))},TVw2:function(t,e,a){"use strict";a.d(e,"b",(function(){return P})),a.d(e,"d",(function(){return T})),a.d(e,"e",(function(){return M})),a.d(e,"a",(function(){return E})),a.d(e,"c",(function(){return j}));var n=a("hfKm"),r=a.n(n),i=a("2Eek"),o=a.n(i),c=a("XoMD"),s=a.n(c),u=a("Jo+v"),l=a.n(u),p=a("4mXO"),f=a.n(p),d=a("pLtp"),h=a.n(d),m=a("xHqa"),v=a.n(m),y=a("Cg2A"),b=a.n(y),g=a("NTd/"),k=a.n(g);function I(t,e){var a=h()(t);if(f.a){var n=f()(t);e&&(n=n.filter((function(e){return l()(t,e).enumerable}))),a.push.apply(a,n)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(Object(a),!0).forEach((function(e){v()(t,e,a[e])})):s.a?o()(t,s()(a)):I(Object(a)).forEach((function(e){r()(t,e,l()(a,e))}))}return t}var P=function(t){return k.a.formatMessage(t)},T={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},style:{textAlign:"left"}},M={wrapperCol:{xs:{span:24},sm:{span:12,offset:6}}},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:+b()(),a=(+new Date(e)-+new Date(t))/1e3,n=Math.floor(a%86400/3600),r=Math.floor(a%3600/60),i=Math.floor(a%60);return"".concat(n<10?"0":"").concat(n,":").concat(r<10?"0":"").concat(r,":").concat(i<10?"0":"").concat(i)},j=function(t,e){return e.map((function(e){if("add"===t||"edit"===t)if(e.value="NUMS"===e.type?Number(e.defaultValue):e.defaultValue,"NUMS"===e.type&&0==e.defaultValue)e.value=0;else if("MULTI"===e.type)return O(O({},e),{},{value:Array(e.value)});return e}))}},"f/1Y":function(t,e,a){"use strict";a.d(e,"a",(function(){return H}));var n=a("hfKm"),r=a.n(n),i=a("2Eek"),o=a.n(i),c=a("XoMD"),s=a.n(c),u=a("Jo+v"),l=a.n(u),p=a("4mXO"),f=a.n(p),d=a("pLtp"),h=a.n(d),m=a("pbKT"),v=a.n(m),y=a("htGi"),b=a.n(y),g=a("/HRN"),k=a.n(g),I=a("WaGi"),O=a.n(I),P=a("K47E"),T=a.n(P),M=a("N9n2"),E=a.n(M),j=a("ZDA2"),D=a.n(j),w=a("/+P4"),x=a.n(w),C=a("xHqa"),S=a.n(C),q=a("q1tI"),B=a.n(q);function N(t,e){var a=h()(t);if(f.a){var n=f()(t);e&&(n=n.filter((function(e){return l()(t,e).enumerable}))),a.push.apply(a,n)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(Object(a),!0).forEach((function(e){S()(t,e,a[e])})):s.a?o()(t,s()(a)):N(Object(a)).forEach((function(e){r()(t,e,l()(a,e))}))}return t}function R(t){var e=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=x()(t);if(e){var r=x()(this).constructor;a=v()(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var A={options:{status:"normal",percent:0}},V=function(t){E()(a,t);var e=R(a);function a(t){var n;return k()(this,a),n=e.call(this,t),S()(T()(n),"changeProgressOptions",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState((function(e){return{options:L(L({},e.options),t)}}))})),n.state={options:L(L({},A.options),t.options)},n}return O()(a,[{key:"render",value:function(){return this.props.children({changeProgress:this.changeProgressOptions,progress:this.state.options})}}]),a}(q.PureComponent);S()(V,"defaultProps",A);var H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return function(a){E()(r,a);var n=R(r);function r(){return k()(this,r),n.apply(this,arguments)}return O()(r,[{key:"render",value:function(){var a=this;return B.a.createElement(V,{options:t},(function(t){var n=t.progress,r=t.changeProgress;return B.a.createElement(e,b()({},a.props,{progress:n,changeProgress:r}))}))}}]),r}(q.PureComponent)}}},t33a:function(t,e,a){t.exports=a("cHUP")(10)}}]);