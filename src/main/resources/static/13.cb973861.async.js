(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"61Lz":function(e,t,a){"use strict";var n=a("pbKT"),r=a.n(n),o=(a("5NDa"),a("5rEg")),i=a("htGi"),l=a.n(i),c=a("/HRN"),s=a.n(c),u=a("WaGi"),p=a.n(u),d=a("N9n2"),m=a.n(d),f=a("ZDA2"),h=a.n(f),y=a("/+P4"),v=a.n(y),g=a("xHqa"),E=a.n(g),b=a("q1tI"),k=a.n(b);function w(e){var t=function(){if("undefined"==typeof Reflect||!r.a)return!1;if(r.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var o=v()(this).constructor;a=r()(n,arguments,o)}else a=n.apply(this,arguments);return h()(this,a)}}var P=function(e){m()(a,e);var t=w(a);function a(){return s()(this,a),t.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var e=this;return k.a.createElement(o.a.TextArea,l()({},this.props,{onBlur:function(t){t.target.value=(t.target.value||"").trim(),e.props.onChange(t),e.props.onBlur(t)}}))}}]),a}(b.PureComponent);E()(P,"defaultProps",{onChange:function(){},onBlur:function(){}});var C=function(e){m()(a,e);var t=w(a);function a(){return s()(this,a),t.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var e=this;return k.a.createElement(o.a,l()({},this.props,{onBlur:function(t){t.target.value=(t.target.value||"").trim(),e.props.onChange(t),e.props.onBlur(t)}}))}}]),a}(b.PureComponent);E()(C,"defaultProps",{onChange:function(){},onBlur:function(){}}),C.TextArea=P,t.a=C},Kmlf:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return fe}));var n,r=a("pbKT"),o=a.n(r),i=(a("IzEo"),a("bx4M")),l=(a("+L6B"),a("2/Rp")),c=a("/HRN"),s=a.n(c),u=a("WaGi"),p=a.n(u),d=a("N9n2"),m=a.n(d),f=a("ZDA2"),h=a.n(f),y=a("/+P4"),v=a.n(y),g=a("q1tI"),E=a.n(g),b=a("MuoO"),k=a("7DNP"),w=a("hfKm"),P=a.n(w),C=a("2Eek"),S=a.n(C),R=a("XoMD"),x=a.n(R),O=a("Jo+v"),T=a.n(O),B=a("4mXO"),L=a.n(B),q=a("pLtp"),U=a.n(q),I=(a("2qtc"),a("kLXV")),H=(a("bP8k"),a("gFTJ")),D=(a("g9YV"),a("wCAj")),F=(a("DZo9"),a("8z0m")),N=(a("MXD1"),a("CFYs")),j=(a("5Dmo"),a("3S7+")),A=(a("Pwec"),a("CtXQ")),M=(a("7Kak"),a("9yH6")),K=a("htGi"),Y=a.n(K),z=a("TbGu"),G=a.n(z),V=(a("miYZ"),a("tsqr")),X=a("K47E"),J=a.n(X),W=a("xHqa"),Z=a.n(W),Q=(a("OaEy"),a("2fM7")),$=(a("y8nQ"),a("Vl3Y")),_=a("Mlzr"),ee=a("61Lz"),te=a("f/1Y"),ae=a("NTd/"),ne=a.n(ae);a("t7F9");function re(e,t){var a=U()(e);if(L.a){var n=L()(e);t&&(n=n.filter((function(t){return T()(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){Z()(e,t,a[t])})):x.a?S()(e,x()(a)):re(Object(a)).forEach((function(t){P()(e,t,T()(a,t))}))}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!o.a)return!1;if(o.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=o()(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var le,ce=$.a.Item,se=Q.a.Option,ue=ee.a.TextArea,pe=function(e){return ne.a.formatMessage(e)},de=Object(b.connect)((function(e){var t=e.taskPredict;return{lists:t.lists,selection:t.selection,banth:t.banth,remote:t.remote,username:e.user.currentUser.username,loading:e.loading.effects["taskPredict/queryTaskList"]}}))(n=$.a.create()(n=Object(te.a)()(n=function(e){m()(a,e);var t=ie(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Z()(J()(e),"state",{visible:!1,type:"N",fileList:[],tagLists:[],percent:0,showHelpB:!1,showHelpR:!1,time:"00:00",startTime:0,fileLists:[],isShowFile:!1,isUpload:!1,downloadUrl:""}),Z()(J()(e),"onOkCreateTask",(function(t){t&&t.preventDefault();var a=e.props,n=a.dispatch,r=a.username;(0,a.form.validateFields)((function(t,a){if(!t){var o={username:r},i=V.a.loading(pe({id:"total.searching"}),0),l="taskPredict/".concat("N"===a.choose?"banth":"remote","Predict"),c=[];if("N"===a.choose&&!(c=a.captcha.split(",").filter((function(e){return""!==e})).map(String)).length)return void i();"N"===a.choose?(o.model=a.encryptionAlgorithm,o.uid=c):(o.modelToken=a.encryptionAlgorithm,o.path=a.path,e.setState({percent:70,startTime:(new Date).getTime()})),n({type:l,payload:oe(oe({},o),{},{use:a.use})}).then((function(t){if(i(),"Y"===a.choose)if(t){var n=(new Date).getTime()-e.state.startTime,r=(n-n%1e3)/1e3,o=r%60,l=(r-o)/60;e.setState({time:"".concat(l||"00",":").concat(o||"00")}),e.setState({percent:100})}else e.setState({percent:0})})).catch((function(t){e.setState({percent:0}),i()}))}}))})),Z()(J()(e),"closeHelpBatch",(function(){e.setState({showHelpB:!1})})),Z()(J()(e),"showHelpBatch",(function(){e.setState({showHelpB:!0})})),Z()(J()(e),"closeHelpRemote",(function(){e.setState({showHelpR:!1})})),Z()(J()(e),"showHelpRemote",(function(){e.setState({showHelpR:!0})})),Z()(J()(e),"queryTaskList",(function(){var t=e.props;(0,t.dispatch)({type:"taskPredict/queryTaskList",payload:{username:t.username,category:"inference"}})})),Z()(J()(e),"querySelections",(function(){var t=e.props;(0,t.dispatch)({type:"taskPredict/querySelectionsPredict",payload:{username:t.username}})})),Z()(J()(e),"handleRadioChange",(function(t){var a=e.props.dispatch;e.setState({type:t.target.value,percent:0}),a({type:"taskPredict/queryBanth",payload:{banth:[]}}),a({type:"taskPredict/queryRemote",payload:{remote:{}}})})),Z()(J()(e),"handleCaptcha",(function(t){e.props.form;e.setState({tagLists:t.target.value.split(",")})})),Z()(J()(e),"beforeUpload",(function(t){if(t.size>104857600)return e.setState({fileLists:[]}),V.a.error("请上传小于100M的文件！",3),!1})),Z()(J()(e),"handleFileChange",(function(t){var a=t.fileList.slice(-1);if(e.setState({fileLists:G()(a)}),"done"===a[0].status){var n=a[0],r=n.response,o=n.type;e.setState({isShowFile:!1,isUpload:!0,downloadUrl:URL.createObjectURL(new Blob([r],{type:o}))||""}),V.a.success(pe({id:"total.uploadSuccess"}))}else"error"===a[0].status?(e.setState({fileLists:[],isShowFile:!1,isUpload:!1}),V.a.error(pe({id:"total.uploadError"}))):e.setState({isShowFile:!0,isUpload:!1})})),Z()(J()(e),"handleDownload",(function(){var t=e.state.downloadUrl,a=document.createElement("a");a.href=t,a.download="predict.txt",a.click()})),e}return p()(a,[{key:"componentDidMount",value:function(){this.querySelections(),this.queryTaskList()}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"taskPredict/queryBanth",payload:{banth:[]}}),e({type:"taskPredict/queryRemote",payload:{remote:{}}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.type,n=t.percent,r=t.showHelpB,o=t.showHelpR,c=t.time,s=t.isShowFile,u=t.fileLists,p=t.downloadUrl,d=this.props,m=d.form,f=d.selection,h=d.banth,y=d.remote,v=d.username,b=m.getFieldDecorator,k=m.getFieldValue,w=f.models,P=k("encryptionAlgorithm"),C={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}},style:{textAlign:"left"}},S={wrapperCol:{xs:{span:24},sm:{span:12,offset:6}}};return E.a.createElement(g.Fragment,null,E.a.createElement($.a,{className:"task-predict"},E.a.createElement(ce,Y()({label:pe({id:"predict.use"})},C),b("use",{rules:[{required:!0,message:pe({id:"train.modalnull"})}],initialValue:Object(_.a)("token")&&Object(_.a)("token")||void 0})(E.a.createElement(Q.a,{showSearch:!0,optionFilterProp:"children",placeholder:pe({id:"predict.use"})},E.a.createElement(se,{key:!0,value:!0},"是"),E.a.createElement(se,{key:!1,value:!1},"否")))),E.a.createElement(ce,Y()({label:pe({id:"predict.modal"})},C,{extra:!k("encryptionAlgorithm")&&pe({id:"predict.noModelWarning"})||""}),b("encryptionAlgorithm",{rules:[{required:!0,message:pe({id:"train.modalnull"})}],initialValue:Object(_.a)("token")&&Object(_.a)("token")||void 0})(E.a.createElement(Q.a,{showSearch:!0,optionFilterProp:"children",placeholder:pe({id:"predict.modal"}),disabled:Object(_.a)("token"),filterOption:function(e,t){return"".concat(t.props.children).toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(){e.setState({downloadUrl:""})}},w.map((function(e,t){return E.a.createElement(se,{key:t,value:e},e)}))))),P&&E.a.createElement(g.Fragment,null,E.a.createElement(ce,Y()({label:pe({id:"launch.operate"})},C),b("choose",{rules:[{required:!1}],initialValue:a})(E.a.createElement(M.a.Group,{onChange:this.handleRadioChange},E.a.createElement(M.a,{value:"N"},pe({id:"predict.manualforecast"})),E.a.createElement(j.a,{title:pe({id:"predict.helpBatchTitle"})},E.a.createElement(A.a,{className:"tooltip",type:"question-circle",onClick:function(){return e.showHelpBatch()}})),E.a.createElement(M.a,{value:"Y"},pe({id:"predict.remoteInference"})),E.a.createElement(j.a,{title:pe({id:"predict.helpRemoteTitle"})},E.a.createElement(A.a,{className:"tooltip",type:"question-circle",onClick:function(){return e.showHelpRemote()}})),E.a.createElement(M.a,{value:"U"},pe({id:"predict.bulkUpload"}))))),"N"===a&&E.a.createElement(g.Fragment,null,E.a.createElement(ce,Y()({label:pe({id:"predict.uid"}),extra:pe({id:"predict.uidtip"})},C),b("captcha",{rules:[{required:!0,message:"Please input the captcha you got!"}]})(E.a.createElement(ee.a,{placeholder:"uid"}))),E.a.createElement(ce,S,E.a.createElement(l.a,{type:"primary",style:{marginRight:15},onClick:this.onOkCreateTask},pe({id:"total.reasoning"})))),"Y"===a&&E.a.createElement(g.Fragment,null,E.a.createElement(ce,Y()({label:pe({id:"predict.uidmul"}),extra:pe({id:"predict.uidmultip"})},C),b("path",{rules:[{required:!0,message:"Please input the filePath you got!"}]})(E.a.createElement(ee.a,{placeholder:pe({id:"predict.uidmul"})}))),E.a.createElement(ce,S,E.a.createElement(l.a,{type:"primary",style:{marginRight:15},onClick:this.onOkCreateTask},pe({id:"total.reasoning"}))),E.a.createElement(ce,Y()({label:pe({id:"predict.percent"})},C),E.a.createElement(N.a,{percent:n})),E.a.createElement(ce,S,E.a.createElement(ue,{disabled:!0,autoSize:{minRows:5},value:y.path&&y.path||""})),E.a.createElement(ce,S,E.a.createElement("span",null,"".concat(pe({id:"predict.time"}),":").concat(c)))),"U"===a&&E.a.createElement(g.Fragment,null,E.a.createElement(ce,S,E.a.createElement(F.a,{action:"".concat(location.origin,"/api/inference/download"),data:{model:P,username:v},name:"file",showUploadList:s,beforeUpload:this.beforeUpload,onChange:this.handleFileChange,fileList:u,headers:{"Access-Token":sessionStorage.getItem("token")}},E.a.createElement(l.a,{icon:"upload"},pe({id:"predict.uidbtn"}))),p&&E.a.createElement(l.a,{type:"primary",style:{marginLeft:15},onClick:this.handleDownload},pe({id:"total.download"}))))),0!==h.length&&E.a.createElement(ce,Y()({label:pe({id:"predict.predictResult"})},C,{extra:pe({id:"predict.twenty"})}),E.a.createElement(D.a,{rowKey:function(e,t){return t},dataSource:h,columns:[{title:"UID",dataIndex:"uid"},{title:"SCORE",dataIndex:"score"}],pagination:!1}))),E.a.createElement(I.a,{visible:r,maskClosable:!1,footer:null,title:pe({id:"predict.manualForecaseSamples"}),onCancel:this.closeHelpBatch,width:600},E.a.createElement(i.a,{hoverable:!0},E.a.createElement(H.a,{bordered:!0,column:2},E.a.createElement(H.a.Item,{label:"接口名",span:2},"手动输入推理接口"),E.a.createElement(H.a.Item,{label:"调用方式",span:2},"POST方法"),E.a.createElement(H.a.Item,{label:"接口地址",span:2},"http://federated-learning.jdfmgt.com/api/inference/batch"),E.a.createElement(H.a.Item,{label:"content/type",span:2},"application/json"),E.a.createElement(H.a.Item,{label:"参数",span:2},'{"uid":[11,12,13],"model":"LinearRegression"}'),E.a.createElement(H.a.Item,{label:"返回",span:2},'{"code": 0,"data": {"predict":[{"uid": 11, "score": 10.263121046652351},{"uid": 11, "score": 10.263121046652351}]},"status": "success"}')))),E.a.createElement(I.a,{title:pe({id:"predict.remoteInferenceSamples"}),visible:o,maskClosable:!1,footer:null,onCancel:this.closeHelpRemote,width:600},E.a.createElement(i.a,{hoverable:!0},E.a.createElement(H.a,{bordered:!0,column:2},E.a.createElement(H.a.Item,{label:"UID文件路径",span:2},"/export/Data/federated-learning-client/predict/uid.txt"),E.a.createElement(H.a.Item,{label:"预测结果路径",span:2},"/export/Data/federated-learning-client/predict/uid_result.txt"),E.a.createElement(H.a.Item,{label:"UID文件格式说明",span:2},"按照列方式保存，每行都是一个UID,示例如下:",E.a.createElement("br",null),"1",E.a.createElement("br",null),"10",E.a.createElement("br",null),"12",E.a.createElement("br",null),"15"),E.a.createElement(H.a.Item,{label:"预测结果格式说明",span:2},"uid,score:",E.a.createElement("br",null),"1,2960.008867071219",E.a.createElement("br",null),"10,2632.500804975137",E.a.createElement("br",null),"12,2660.5364728846753",E.a.createElement("br",null),"15,2632.500804975137")))))}}]),a}(g.PureComponent))||n)||n)||n;function me(e){var t=function(){if("undefined"==typeof Reflect||!o.a)return!1;if(o.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=o()(n,arguments,r)}else a=n.apply(this,arguments);return h()(this,a)}}var fe=Object(b.connect)((function(e){return{TaskPredict:e.TaskPredict}}))(le=function(e){m()(a,e);var t=me(a);function a(){return s()(this,a),t.apply(this,arguments)}return p()(a,[{key:"render",value:function(){var e=this.props.dispatch;return E.a.createElement(i.a,{title:ne.a.formatMessage({id:"predict.create"}),extra:E.a.createElement(l.a,{type:"primary",onClick:function(){e(k.routerRedux.push("/task/predict/list"))}},ne.a.formatMessage({id:"launch.goback"}))},E.a.createElement(de,null))}}]),a}(g.PureComponent))||le},Mlzr:function(e,t,a){"use strict";function n(e){var t=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)"),a=window.location.href.match(t);return null!=a?decodeURI(a[2]):null}a.d(t,"a",(function(){return n}))},"f/1Y":function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a("hfKm"),r=a.n(n),o=a("2Eek"),i=a.n(o),l=a("XoMD"),c=a.n(l),s=a("Jo+v"),u=a.n(s),p=a("4mXO"),d=a.n(p),m=a("pLtp"),f=a.n(m),h=a("pbKT"),y=a.n(h),v=a("htGi"),g=a.n(v),E=a("/HRN"),b=a.n(E),k=a("WaGi"),w=a.n(k),P=a("K47E"),C=a.n(P),S=a("N9n2"),R=a.n(S),x=a("ZDA2"),O=a.n(x),T=a("/+P4"),B=a.n(T),L=a("xHqa"),q=a.n(L),U=a("q1tI"),I=a.n(U);function H(e,t){var a=f()(e);if(d.a){var n=d()(e);t&&(n=n.filter((function(t){return u()(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){q()(e,t,a[t])})):c.a?i()(e,c()(a)):H(Object(a)).forEach((function(t){r()(e,t,u()(a,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!y.a)return!1;if(y.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(y()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=B()(e);if(t){var r=B()(this).constructor;a=y()(n,arguments,r)}else a=n.apply(this,arguments);return O()(this,a)}}var N={options:{status:"normal",percent:0}},j=function(e){R()(a,e);var t=F(a);function a(e){var n;return b()(this,a),n=t.call(this,e),q()(C()(n),"changeProgressOptions",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState((function(t){return{options:D(D({},t.options),e)}}))})),n.state={options:D(D({},N.options),e.options)},n}return w()(a,[{key:"render",value:function(){return this.props.children({changeProgress:this.changeProgressOptions,progress:this.state.options})}}]),a}(U.PureComponent);q()(j,"defaultProps",N);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return function(a){R()(r,a);var n=F(r);function r(){return b()(this,r),n.apply(this,arguments)}return w()(r,[{key:"render",value:function(){var a=this;return I.a.createElement(j,{options:e},(function(e){var n=e.progress,r=e.changeProgress;return I.a.createElement(t,g()({},a.props,{progress:n,changeProgress:r}))}))}}]),r}(U.PureComponent)}}},t33a:function(e,t,a){e.exports=a("cHUP")(10)}}]);